{# users/templates/users/editar_perfil.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Editar mi perfil – FoodieNet{% endblock %}

{% block content %}
  <h1>Editar perfil</h1>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <!-- Datos de usuario -->
    <fieldset style="border:1px solid #ccc; padding:1rem; margin-bottom:1rem;">
      <legend>Datos de usuario</legend>
      {{ form_user.non_field_errors }}
      <p>
        <label for="id_username">Nombre de usuario:</label><br>
        {{ form_user.username.errors }}
        {{ form_user.username }}
      </p>
      <p>
        <label for="id_email">Correo electrónico:</label><br>
        {{ form_user.email.errors }}
        {{ form_user.email }}
      </p>
    </fieldset>

    <!-- Datos de perfil -->
    <fieldset style="border:1px solid #ccc; padding:1rem; margin-bottom:1rem;">
      <legend>Datos de perfil</legend>

      <p>
        <label for="id_foto">Foto de perfil:</label><br>
        {{ form_perfil.foto.errors }}
        {{ form_perfil.foto }}
        {% if request.user.perfil.foto.url %}
          <br>
          <img src="{{ request.user.perfil.foto.url }}" alt="Foto actual" width="120" style="border-radius:50%; margin-top:0.5rem;">
        {% endif %}
      </p>

      <p>
        <label for="id_biografia">Biografía:</label><br>
        {{ form_perfil.biografia.errors }}
        {{ form_perfil.biografia }}
      </p>

      <p>
        <label for="id_edad">Edad:</label><br>
        {{ form_perfil.edad.errors }}
        {{ form_perfil.edad }}
      </p>

      <p>
        <label for="id_peso">Peso (kg):</label><br>
        {{ form_perfil.peso.errors }}
        {{ form_perfil.peso }}
      </p>

      <p>
        <label for="id_altura">Altura (cm):</label><br>
        {{ form_perfil.altura.errors }}
        {{ form_perfil.altura }}
      </p>

      <p>
        <label for="id_sexo">Sexo:</label><br>
        {{ form_perfil.sexo.errors }}
        {{ form_perfil.sexo }}
      </p>

      <p>
        <label for="id_objetivo">Objetivo:</label><br>
        {{ form_perfil.objetivo.errors }}
        {{ form_perfil.objetivo }}
      </p>
    </fieldset>

    <button type="submit" style="padding:0.5rem 1rem; background:#28a745; color:white; border:none; border-radius:4px;">
      Guardar cambios
    </button>
    <a href="{% url 'users:perfil_usuario' request.user.username %}" style="margin-left:1rem;">Cancelar</a>
  </form>
{% endblock %}
